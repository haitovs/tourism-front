<!DOCTYPE html>
<html lang="{{ lang or 'en' }}">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Expo Site</title>

        <!-- Tailwind / HTMX / Alpine via CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/htmx.org@2.0.3"></script>
        <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

        <!-- CSS: variables first, then components -->
        <link rel="stylesheet" href="{{ url_for('static', path='/css/extra.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='/css/detailbar.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='/css/navpill.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='/css/hero.css') }}" />

        <!-- Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body class="bg-[var(--c-bg)] text-[var(--c-text)]">
        {% block content %}{% endblock %}
        <footer class="mt-16 border-t">
            <div class="max-w-[var(--container)] mx-auto px-4 py-8 text-sm text-slate-600">Â© 2025</div>
        </footer>
        <script>
            // Smooth infinite horizontal loop + drag + wheel
            function hloop({ speed = 0.6 } = {}) {
                return {
                    el: null,
                    raf: null,
                    dragging: false,
                    lastX: 0,
                    vx: speed,
                    init(el) {
                        this.el = el;
                        const step = () => {
                            if (!this.dragging) {
                                this.el.scrollLeft += this.vx;
                                const half = Math.floor(this.el.scrollWidth / 2);
                                if (this.el.scrollLeft >= half) this.el.scrollLeft = 0;
                            }
                            this.raf = requestAnimationFrame(step);
                        };
                        this.raf = requestAnimationFrame(step);
                    },
                    wheel(e) {
                        this.el.scrollLeft += e.deltaY;
                    },
                    dragStart(e) {
                        this.dragging = true;
                        this.lastX = e.pageX;
                        cancelAnimationFrame(this.raf);
                    },
                    dragMove(e) {
                        if (!this.dragging) return;
                        const dx = this.lastX - e.pageX;
                        this.el.scrollLeft += dx;
                        this.lastX = e.pageX;
                    },
                    dragEnd() {
                        if (!this.dragging) return;
                        this.dragging = false;
                        this.raf = requestAnimationFrame(() => this.init(this.el));
                    },
                };
            }
        </script>
    </body>
</html>
