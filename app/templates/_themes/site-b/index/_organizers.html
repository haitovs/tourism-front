{# app/templates/_organizers.html (Site-B / single row) #}
{% set all = (data and data.get('items')) or [] %}
{% set count = all|length %}

<section id="organizers" class="w-full max-w-[var(--container)] mx-auto py-16">
    <!-- Heading + 20px green bar (rounded on the right) -->
    <header class="mb-8">
        <h2 class="font-['Roboto'] font-semibold text-[clamp(24px,3.5vw,40px)] leading-[1] text-[#1E1E1E]">
            {{ t('siteb.organizers.title') or 'Presented by the following organization:' }}
        </h2>
        <div class="mt-3 h-5 w-[min(788px,90%)] bg-[#B8D779] rounded-r-[10px]"></div>
    </header>

    {% macro organizer_card(p) -%}
    <article class="w-[280px] h-[180px] bg-white rounded-[5px]
           border-2 border-transparent hover:border-[#20306C]
           flex items-center justify-center select-none overflow-hidden">
        {% if p.logo_url %}
        <img src="{{ p.logo_url }}" alt="{{ p.name }}" title="{{ p.name }}"
            class="object-contain w-full h-full" loading="lazy"
            onerror="this.src='/static/img/img_placeholder.png'; this.style.opacity='0.7'; this.style.objectFit='contain';" />
        {% else %}
        <img src="/static/img/img_placeholder.png" alt="{{ p.name }}" title="{{ p.name }}"
            class="object-contain opacity-70 w-full h-full" loading="lazy" />
        {% endif %}
    </article>
    {%- endmacro %}

    {% if count == 0 %}
    <div class="text-center text-slate-500">{{ t('index.organizers.none') }}</div>
    {% else %}
    <!-- Single-row marquee. Viewport clips horizontal overflow to avoid white space to the right -->
    <div class="relative overflow-x-clip w-full">
        <div class="marquee" data-marquee data-speed="60" data-min="1" data-respect-rm="false" style="--gap:1.25rem">
            <div class="marquee__viewport overflow-x-hidden !overflow-y-visible">
                <ul class="marquee__track">
                    {% for p in all %}
                    <li class="marquee__item">
                        {% set raw = (p.website|default('')|trim) %}
                        {% set href = raw %}
                        {% if raw and not raw.startswith('http://') and not raw.startswith('https://') and not
                        raw.startswith('mailto:') %}
                        {% set href = 'https://' ~ raw.lstrip('/') %}
                        {% endif %}

                        {% if href %}
                        <a href="{{ href }}" target="_blank" rel="noopener noreferrer nofollow"
                            class="block focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#20306C] focus-visible:ring-offset-2"
                            aria-label="{{ p.name }}">
                            {{ organizer_card(p) }}
                        </a>
                        {% else %}
                        {{ organizer_card(p) }}
                        {% endif %}

                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    {% endif %}
</section>
