<section class="max-w-[var(--container)] mx-auto px-4 py-14 space-y-10" id="timer">
    <!-- HEADER -->
    <header class="text-center">
        <div class="flex items-center justify-center gap-4">
            <span class="hidden sm:block h-px w-[60px] bg-[var(--c-primary)]"></span>
            <span class="font-['Montserrat'] text-[30px] leading-[75px] text-[var(--c-primary)]">
                {{ t('home.timer.title_mini') }}
            </span>
            <span class="hidden sm:block h-px w-[60px] bg-[var(--c-primary)]"></span>
        </div>
    </header>

    {# Safe request.state.site -> _site #}
    {% set _state = (request.state if (request is defined and request and request.state is defined) else none) %}
    {% set _site = (_state.site if (_state is not none and _state.site is defined and _state.site) else none) %}

    <!-- Alpine state -->
    <div x-data='window.timerWidget({
        apiBase: "{{ settings.BACKEND_BASE_URL }}",
        bgUrl: "{{ theme("img/timer/timer-bg.png") }}",
        logoUrl: "{{ theme("img/timer/logo.svg") }}",
        site: {{ (site_slug() if site_slug is defined else none) | tojson }},
        siteId: {{ (_site.id if (_site is not none and _site.id is defined and _site.id) else none) | tojson }}
      })' x-init='$nextTick(()=> { if (typeof init==="function") init(); })'>

        <!-- ===== DESKTOP (>=1024px) — Figma 1310×450 ===== -->
        <div class=" hidden lg:flex w-full justify-center">
            <div class="relative w-[1310px] h-[450px] rounded-[10px] overflow-hidden">
                <!-- BG -->
                <img src="{{ theme('img/timer/timer-bg.png') }}" x-bind:src="bgUrl" alt="" aria-hidden="true"
                    onerror="this.src='/static/img/img_placeholder.png'; this.style.objectFit='contain';"
                    class="absolute inset-0 w-full h-full object-cover" />
                <!-- Overlay rgba(32,48,108,.45) -->
                <div class="absolute inset-0 bg-[rgba(32,48,108,0.45)]"></div>

                <!-- Content -->
                <div class="relative z-10 h-full px-12 text-white">
                    <!-- Top labels -->
                    <div class="flex items-start justify-between pt-10">
                        <div class="font-['Lato'] font-bold text-[35px] leading-[40px]">
                            {{ t('home.timer.remaining') }}
                        </div>
                        <div class="font-['Lato'] font-bold text-[35px] leading-[40px]">
                            {{ t('home.timer.deadline') }}
                        </div>
                    </div>

                    <!-- Middle row -->
                    <div class="absolute left-0 bottom-0 w-full pb-10">
                        <div class="mx-12 flex items-center justify-between">
                            <!-- Left counters (D:H:M:S) -->
                            <div class="flex items-center gap-6">

                                <!-- DAYS -->
                                <div class="flex flex-col items-center">
                                    <div class="inline-flex items-center
                    w-[150px] h-[100px]
                    font-['Poppins'] tabular-nums text-[100px] leading-none justify-center" x-text="dd">00</div>
                                    <div class="font-['Lato'] text-[26px] leading-[42px] uppercase tracking-wide">
                                        {{ t('home.timer.days') }}
                                    </div>
                                </div>

                                <!-- ':' -->
                                <div class="text-center w-[44px]">
                                    <div class="font-['Roboto'] font-semibold text-[88px] leading-[32px] -mb-5">:</div>
                                </div>

                                <!-- HOURS -->
                                <div class="flex flex-col items-center">
                                    <div class="inline-flex items-center justify-center
                    w-[150px] h-[100px]
                    font-['Poppins'] tabular-nums text-[100px] leading-none" x-text="hh">00</div>
                                    <div class="font-['Lato'] text-[26px] leading-[42px] uppercase tracking-wide">
                                        {{ t('home.timer.hours') }}
                                    </div>
                                </div>

                                <!-- ':' -->
                                <div class="text-center w-[44px]">
                                    <div class="font-['Roboto'] font-semibold text-[88px] leading-[32px] -mb-5">:</div>
                                </div>

                                <!-- MINUTES -->
                                <div class="flex flex-col items-center">
                                    <div class="inline-flex items-center justify-center
                    w-[150px] h-[100px]
                    font-['Poppins'] tabular-nums text-[100px] leading-none" x-text="mm">00</div>
                                    <div class="font-['Lato'] text-[26px] leading-[42px] uppercase tracking-wide">
                                        {{ t('home.timer.minutes') }}
                                    </div>
                                </div>

                                <!-- ':' -->
                                <div class="text-center w-[44px]">
                                    <div class="font-['Roboto'] font-semibold text-[88px] leading-[32px] -mb-5">:</div>
                                </div>

                                <!-- SECONDS -->
                                <div class="flex flex-col items-center">
                                    <div class="inline-flex items-center justify-center
                    w-[170px] h-[110px]
                    font-['Poppins'] tabular-nums text-[110px] leading-none" x-text="ss">00</div>
                                    <div class="font-['Lato'] text-[24px] leading-[40px] uppercase tracking-wide">
                                        {{ t('home.timer.seconds') }}
                                    </div>
                                </div>
                            </div>

                            <div class="hidden xl:block h-[330px] w-[2px] bg-white/90"></div>

                            <!-- Right deadline -->
                            <div class="text-center shrink-0">
                                <div class="font-['Poppins'] tabular-nums font-normal text-[100px] leading-[96px]">
                                    {{ timer.deadline_day }}
                                </div>
                                <div
                                    class="font-['Lato'] font-normal text-[26px] leading-[42px] uppercase tracking-wide">
                                    {{ timer.deadline_month_upper }}
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- ===== MOBILE/TABLET (<1024px) with seconds ===== -->
        <div class="lg:hidden block w-full">
            <div class="relative mx-auto
                  w-[380px]  h-[180px]
                  sm:w-[460px] sm:h-[200px]
                  md:w-[620px] md:h-[240px]
                  rounded-[16px] overflow-hidden">
                <!-- BG -->
                <img src="{{ theme('img/timer/timer-bg.png') }}" x-bind:src="bgUrl" alt="" aria-hidden="true"
                    onerror="this.src='/static/img/img_placeholder.png'; this.style.objectFit='contain';"
                    class="absolute inset-0 w-full h-full object-cover" />
                <!-- Slightly stronger overlay for readability -->
                <div class="absolute inset-0 bg-[rgba(32,48,108,0.50)]"></div>

                <!-- Content -->
                <div class="relative z-10 h-full px-4 sm:px-5 md:px-7 flex items-center justify-between text-white">
                    <!-- Left counters -->
                    <div class="flex-1">
                        <div class="font-['Lato'] font-bold text-[14px] sm:text-[15px] md:text-[16px]">
                            {{ t('home.timer.remaining') }}
                        </div>

                        <div class="mt-2 sm:mt-2.5 md:mt-3 flex items-center gap-3 sm:gap-3.5 md:gap-4 tabular-nums">
                            <!-- DAYS -->
                            <div class="text-center min-w-[66px] sm:min-w-[74px] md:min-w-[86px]">
                                <div class="font-['Poppins'] tabular-nums leading-none text-[28px] sm:text-[32px] md:text-[38px]"
                                    x-text="dd">00</div>
                                <div
                                    class="font-['Lato'] tracking-wide text-[10px] sm:text-[11px] md:text-[12px] uppercase">
                                    {{ t('home.timer.days') }}
                                </div>
                            </div>

                            <div
                                class="flex flex-col items-center justify-center gap-[12px] sm:gap-[13px] md:gap-[14px] w-[18px] sm:w-[20px] md:w-[22px] shrink-0">
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                            </div>

                            <!-- HOURS -->
                            <div class="text-center min-w-[66px] sm:min-w-[74px] md:min-w-[86px]">
                                <div class="font-['Poppins'] tabular-nums leading-none text-[28px] sm:text-[32px] md:text-[38px]"
                                    x-text="hh">00</div>
                                <div
                                    class="font-['Lato'] tracking-wide text-[10px] sm:text-[11px] md:text-[12px] uppercase">
                                    {{ t('home.timer.hours') }}
                                </div>
                            </div>

                            <div
                                class="flex flex-col items-center justify-center gap-[12px] sm:gap-[13px] md:gap-[14px] w-[18px] sm:w-[20px] md:w-[22px] shrink-0">
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                            </div>

                            <!-- MINUTES -->
                            <div class="text-center min-w-[66px] sm:min-w-[74px] md:min-w-[86px]">
                                <div class="font-['Poppins'] tabular-nums leading-none text-[28px] sm:text-[32px] md:text-[38px]"
                                    x-text="mm">00</div>
                                <div
                                    class="font-['Lato'] tracking-wide text-[10px] sm:text-[11px] md:text-[12px] uppercase">
                                    {{ t('home.timer.minutes') }}
                                </div>
                            </div>

                            <div
                                class="flex flex-col items-center justify-center gap-[12px] sm:gap-[13px] md:gap-[14px] w-[18px] sm:w-[20px] md:w-[22px] shrink-0">
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                                <span class="block w-2 h-2 rounded-full bg-white"></span>
                            </div>

                            <!-- SECONDS -->
                            <div class="text-center min-w-[66px] sm:min-w-[74px] md:min-w-[86px]">
                                <div class="font-['Poppins'] tabular-nums leading-none text-[28px] sm:text-[32px] md:text-[38px]"
                                    x-text="ss">00</div>
                                <div
                                    class="font-['Lato'] tracking-wide text-[10px] sm:text-[11px] md:text-[12px] uppercase">
                                    {{ t('home.timer.seconds') }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right deadline -->
                    <div class="flex items-center gap-3 sm:gap-3.5 md:gap-4 pl-3 sm:pl-3.5 md:pl-4">
                        <div class="h-[84px] sm:h-[96px] md:h-[108px] w-px bg-white/80"></div>
                        <div class="text-center">
                            <div class="font-['Lato'] font-bold text-[14px] sm:text-[15px] md:text-[16px]">
                                {{ t('home.timer.deadline') }}
                            </div>
                            <div
                                class="mt-1.5 sm:mt-2 md:mt-2.5 font-['Poppins'] leading-none text-[28px] sm:text-[32px] md:text-[36px]">
                                {{ timer.deadline_day }}
                            </div>
                            <div
                                class="font-['Lato'] tracking-wide uppercase text-[10px] sm:text-[11px] md:text-[12px]">
                                {{ timer.deadline_month_upper }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>