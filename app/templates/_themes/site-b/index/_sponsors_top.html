{% set vm = sponsors_top_view|default({}) %}
{% set items = vm['items']|default([]) %}
{% set layout = vm.layout|default('empty') %}
{% set placeholder_src = vm.placeholder_src|default('/static/img/img_placeholder.png') %}

<div class="w-full mx-auto max-w-[var(--container)]">
    {% if layout == "empty" %}
    <div class="text-slate-500 text-center">{{ t('sponsors.top.empty') }}</div>

    {% elif layout == "grid" %}
    <ul class="flex flex-wrap justify-center gap-3 sm:gap-4">
        {% for sp in items %}
        <li class="flex justify-center">
            <div class="w-[180px] sm:w-[220px] md:w-[240px] items-center">
                {% set href = sp.website|default('') %}
                {% set logo = sp.logo_url or placeholder_src %}
                {% set name = sp.name|default(t('sponsors.common.sponsor')) %}
                {% set tier_label = sp.tier_label|default('') %}

                {% if href %}
                <a href="{{ href }}" class="{{ vm.link_interactive_class|default('') }}" target="_blank"
                    rel="noopener noreferrer" aria-label="{{ name }} {{ t('sponsors.common.opens_new_tab') }}">
                    <article
                        class="sb-card sb-card--top {{ vm.card_base_class|default('') }}{{ vm.card_interactive_suffix|default('') }}">
                        <img src="{{ logo }}" alt="{{ name if logo else t('sponsors.common.sponsor') }}"
                            title="{{ name }}"
                            class="block mx-auto select-none pointer-events-none object-contain h-auto"
                            style="max-width: {{ vm.img_w|default(240) }}px; max-height: {{ vm.img_h|default(140) }}px;"
                            draggable="false" />
                    </article>
                </a>
                {% else %}
                <article class="sb-card sb-card--top {{ vm.card_base_class|default('') }}">
                    <img src="{{ logo }}" alt="{{ name if logo else t('sponsors.common.sponsor') }}" title="{{ name }}"
                        class="block mx-auto select-none pointer-events-none object-contain h-auto"
                        style="max-width: {{ vm.img_w|default(240) }}px; max-height: {{ vm.img_h|default(140) }}px;"
                        draggable="false" />
                </article>
                {% endif %}

                {% if tier_label and show_sponsor_tiers|default(true) %}
                <div class="sb-tier">{{ tier_label }}</div>
                {% endif %}
            </div>
        </li>
        {% endfor %}
    </ul>

    {% else %}
    <div class="marquee [--gap:.75rem]" data-marquee data-speed="60" data-min="1" data-respect-rm="false">
        <div class="marquee__viewport overflow-x-hidden !overflow-y-visible">
            <ul class="marquee__track">
                {% for sp in items %}
                {% set href = sp.website|default('') %}
                {% set logo = sp.logo_url or placeholder_src %}
                {% set name = sp.name|default(t('sponsors.common.sponsor')) %}
                {% set tier_label = sp.tier_label|default('') %}
                <li class="marquee__item">
                    <div class="w-[180px] sm:w-[220px] md:w-[240px] sb-card-parent">
                        {% if href %}
                        <a href="{{ href }}" class="{{ vm.link_interactive_class|default('') }}" target="_blank"
                            rel="noopener noreferrer" aria-label="{{ name }} {{ t('sponsors.common.opens_new_tab') }}">
                            <article
                                class="sb-card sb-card--top {{ vm.card_base_class|default('') }}{{ vm.card_interactive_suffix|default('') }}">
                                <img src="{{ logo }}" alt="{{ name if logo else t('sponsors.common.sponsor') }}"
                                    title="{{ name }}"
                                    class="block mx-auto select-none pointer-events-none object-contain h-auto"
                                    style="max-width: {{ vm.img_w|default(240) }}px; max-height: {{ vm.img_h|default(140) }}px;"
                                    draggable="false" />
                            </article>
                        </a>
                        {% else %}
                        <article class="sb-card sb-card--top {{ vm.card_base_class|default('') }}">
                            <img src="{{ logo }}" alt="{{ name if logo else t('sponsors.common.sponsor') }}"
                                title="{{ name }}"
                                class="block mx-auto select-none pointer-events-none object-contain h-auto"
                                style="max-width: {{ vm.img_w|default(240) }}px; max-height: {{ vm.img_h|default(140) }}px;"
                                draggable="false" />
                        </article>
                        {% endif %}

                        {% if tier_label and show_sponsor_tiers|default(true) %}
                        <div class="sb-tier">{{ tier_label }}</div>
                        {% endif %}
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}
</div>
