<header id="site-header" class="detailbar relative z-detail" x-data="{ langOpen:false }">
    <div class="max-w-[var(--container)] mx-auto px-4 row flex items-center justify-between">
        <!-- left: logo only -->
        <div class="flex items-center gap-4">
            <a href="/" aria-label="Home">
                <img src="/static/img/logo.svg" alt="Logo" class="h-8 w-auto" />
            </a>
        </div>

        <!-- right: email + phone + lang + user -->
        <div class="flex items-center gap-6">
            <div class="hidden md:flex items-center gap-3">
                <img src="/static/img/ic-mail.svg" class="w-6 h-6" alt="" />
                <a
                    href="mailto:info@ciet-turkmenistan.com"
                    class="font-['Roboto'] font-medium text-[20px] md:text-[24px]"
                >
                    info@ciet-turkmenistan.com
                </a>
            </div>

            <div class="hidden md:flex items-center gap-2">
                <img src="/static/img/ic-phone.svg" class="w-6 h-6" alt="" />
                <a href="tel:+99361480080" class="font-['Roboto'] font-medium text-[20px] md:text-[24px]">
                    +99361 480 080
                </a>
            </div>

            {# --- Language switcher: hover dropdown --- #} {% set _path = request.url.path %} {% set _params =
            request.query_params %}

            <div class="relative group">
                <button
                    class="flex items-center gap-1 font-['Roboto'] font-medium text-[20px] md:text-[24px] group-hover:text-[#00B374]"
                    aria-haspopup="true"
                >
                    {{ (lang or 'en')|upper }}
                    <svg
                        class="w-4 h-4 -rotate-90 transition-transform group-hover:rotate-0"
                        viewBox="0 0 24 24"
                        fill="none"
                        aria-hidden="true"
                    >
                        <path
                            d="M6 9l6 6 6-6"
                            stroke="#F4F4F2"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>
                </button>
                <div
                    class="absolute right-0 mt-2 w-24 p-2 glass text-white text-center z-[70] hidden group-hover:block"
                >
                    {% for code in ['ru','tm','en'] %}
                    <a
                        class="block py-2 hover:bg-white/10 transition"
                        href="{{ _path }}?lang={{ code }}{% for k,v in _params.items() if k!='lang' %}&{{k}}={{ v|urlencode }}{% endfor %}"
                    >
                        {{ code|upper }}
                    </a>
                    {% endfor %}
                </div>
            </div>

            <img src="/static/img/ic-user.svg" class="w-6 h-6 hidden md:block" alt="" />
        </div>
    </div>

    <!-- NavPill -->
    {% set p = request.url.path %}
    <div class="pill-rail">
        <nav class="navpill px-4 md:px-6">
            <ul
                class="flex flex-wrap items-center gap-3 md:gap-6 font-['Roboto'] font-bold text-[18px] md:text-[22px] text-[var(--c-primary)]"
            >
                <li>
                    <a
                        class="px-3 py-1 rounded-full {{ 'bg-white text-[var(--c-text)]' if p=='/' else 'hover:text-[var(--c-text)]' }}"
                        href="/"
                        >Home</a
                    >
                </li>

                <li class="relative" x-data="{m:false}" @mouseenter="m=true" @mouseleave="m=false">
                    <button class="flex items-center gap-2 hover:text-[var(--c-text)]">
                        About the Forum <span class="text-[var(--c-text)]/40">›</span>
                    </button>

                    <div x-show="m" x-transition class="menu-dd">
                        <div class="glass menu-panel menu-grid">
                            <!-- /forum row with right-side extender -->
                            <div
                                class="menu-items relative"
                                x-data="{open:false}"
                                @mouseenter="open=true"
                                @mouseleave="open=false"
                            >
                                <a href="/forum" class="menu-item">
                                    <span>Forum</span>
                                    <span class="menu-items-arrow" aria-hidden="true"></span>
                                </a>

                                <!-- RIGHT EXTENSION CARD (extends current dropdown) -->
                                <div x-show="open" x-transition.opacity class="menu-subcard">
                                    <a href="/agenda" class="menu-items-item menu-subitem">Agenda</a>
                                    <a href="/speakers" class="menu-items-item menu-subitem">Speakers</a>
                                    <a href="/meeting-request" class="menu-items-item menu-subitem">Meeting request</a>
                                </div>
                            </div>

                            <hr class="menu-sep" />
                            <a href="/expo-sectors" class="menu-item">Expo</a>
                            <hr class="menu-sep" />
                            <a href="/official-support" class="menu-item">Official support</a>
                            <hr class="menu-sep" />
                            <a href="/brochure" class="menu-item">Brochure</a>
                        </div>
                    </div>
                </li>

                <li class="relative" x-data="{m:false}" @mouseenter="m=true" @mouseleave="m=false">
                    <button class="flex items-center gap-2 hover:text-[var(--c-text)]">
                        Participants <span class="text-[var(--c-text)]/40">›</span>
                    </button>
                    <div x-show="m" x-transition class="menu-dd">
                        <div class="glass menu-panel">
                            <a href="/forum" class="menu-item">Forum</a>
                            <hr class="menu-sep" />
                            <a href="/expo-sectors" class="menu-item">Expo</a>
                            <hr class="menu-sep" />
                            <a href="/expo-sectors" class="menu-item">All</a>
                        </div>
                    </div>
                </li>

                <li>
                    <a
                        href="/news"
                        class="{{ 'text-[var(--c-text)]' if p.startswith('/news') else 'hover:text-[var(--c-text)]' }}"
                        >News</a
                    >
                </li>

                <li class="relative" x-data="{m:false}" @mouseenter="m=true" @mouseleave="m=false">
                    <button class="flex items-center gap-2 hover:text-[var(--c-text)]">
                        Travel &amp; Accommodation Guide <span class="text-[var(--c-text)]/40">›</span>
                    </button>
                    <div x-show="m" x-transition class="menu-dd">
                        <div class="glass menu-panel">
                            <a href="/visa" class="menu-item">Apply for Visa</a>
                            <hr class="menu-sep" />
                            <a href="/hotel" class="menu-item">Book Your Hotel</a>
                            <hr class="menu-sep" />
                            <a href="/flight" class="menu-item">Book Your Flight</a>
                            <hr class="menu-sep" />
                            <a href="/faq" class="menu-item">FAQ</a>
                        </div>
                    </div>
                </li>

                <li>
                    <a
                        href="/registration"
                        class="{{ 'text-[var(--c-text)]' if p.startswith('/registration') else 'hover:text-[var(--c-text)]' }}"
                        >Registration</a
                    >
                </li>
            </ul>
        </nav>
    </div>
</header>
