{% set order = ["premier", "general", "diamond", "platinum"] %} {% set top = sponsors_top if sponsors_top is defined else data %}

<div
    x-data="{
    step: 270,
    autoscroll() {
      const rail = this.$refs.rail
      if (!rail) return
      const overflow = rail.scrollWidth > rail.clientWidth
      if (!overflow) return
      setInterval(() => {
        const atEnd = Math.ceil(rail.scrollLeft + rail.clientWidth + 4) >= rail.scrollWidth
        rail.scrollTo({ left: atEnd ? 0 : rail.scrollLeft + this.step, behavior: 'smooth' })
      }, 10000)
    }
  }"
    x-init="autoscroll()"
    class="relative"
>
    <!-- rail -->
    <div
        x-ref="rail"
        class="overflow-x-auto snap-x snap-mandatory flex gap-5 pb-2"
        x-on:wheel.passive="$el.scrollLeft += $event.deltaY"
        style="scroll-behavior: smooth"
    >
        {% for tier in order %} {% set items = top.get(tier, []) %}
        <div class="snap-start shrink-0 w-[250px]">
            <div class="bg-white rounded-2xl shadow p-4 flex flex-col items-center justify-between h-[276px]">
                {% if items and items[0].logo_url %}
                <img
                    src="{{ items[0].logo_url }}"
                    alt="{{ items[0].name }}"
                    title="{{ items[0].name }}"
                    class="w-[202px] h-[202px] object-contain"
                />
                {% else %}
                <img
                    src="/static/img/sponsor_logo.png"
                    alt="No sponsor yet"
                    class="w-[202px] h-[202px] object-contain opacity-70"
                />
                {% endif %}
                <div class="text-sm font-bold uppercase tracking-wide text-slate-500/60">{{ tier }} sponsor</div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
