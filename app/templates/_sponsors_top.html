{# Build ordered list: premier, general, diamond, platinum #} {% set order = ["premier", "general", "diamond", "platinum"] %} {%
set top = sponsors_top | default({}) %} {% set flat = [] %} {% for t in order %} {% set entry = (top.get(t, []) and top.get(t,
[])[0]) or None %} {% if entry %}{% set _ = flat.append(entry) %}{% endif %} {% endfor %} {% set count = flat|length %}

<div
    id="splide-{{ tier }}"
    class="splide w-full"
    aria-label="{{ tier }} sponsors"
    data-splide="{}"
    data-count="{{ count }}"
    data-type="{{ 'loop' if count > 10 else 'slide' }}"
    data-autoplay="{{ 'true' if count > 10 else 'false' }}"
    data-interval="10000"
    data-speed="600"
    data-gap="1rem"
    data-rows="2"
    data-cols="5"
    data-row-gap="1rem"
    data-col-gap="1rem"
    data-breakpoints='{
    "1024": { "grid": { "rows": 2, "cols": 3, "gap": { "row": "0.75rem", "col": "0.75rem" } } },
    "640":  { "grid": { "rows": 2, "cols": 2, "gap": { "row": "0.5rem",  "col": "0.5rem"  } } }
  }'
>
    <div class="splide__track">
        <ul class="splide__list">
            {% for sp in flat %}
            <li class="splide__slide flex justify-center">
                <div class="w-[250px]">
                    <div class="bg-white rounded-2xl shadow p-4 flex flex-col items-center justify-between h-[276px]">
                        {% if sp.logo_url %}
                        <img
                            src="{{ sp.logo_url }}"
                            alt="{{ sp.name }}"
                            title="{{ sp.name }}"
                            class="w-[202px] h-[202px] object-fill select-none pointer-events-none"
                            draggable="false"
                        />
                        {% else %}
                        <img
                            src="/static/img/sponsor_logo.png"
                            alt="No sponsor yet"
                            class="w-[202px] h-[202px] object-fill opacity-70 select-none pointer-events-none"
                            draggable="false"
                        />
                        {% endif %}
                        <div class="text-sm font-bold uppercase tracking-wide text-slate-500/60">{{ sp.tier }} sponsor</div>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
