{% extends "base.html" %}
{% from "_hero_macros.html" import hero_buttons %}
{% block content %}
{% if is_site('site-b') %}
<main>
    <!-- HERO -->
    <section class="relative w-full h-[380px] md:h-[420px]">
        <img src="{{ theme('img/hero-bg.png') }}" alt="" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0" style="background: rgba(32,48,108,0.55);"></div>

        <div class="relative z-[1] h-full flex flex-col items-center justify-center text-center px-4">
            <h1 class="font-['Montserrat'] font-bold text-[clamp(32px,4.6vw,54px)] leading-tight text-white">
                {{ t('siteb.speakers.hero.title') }}
            </h1>
            <p class="mt-3 font-['Roboto'] text-[clamp(16px,2.4vw,22px)] text-white/90">
                {{ t('siteb.speakers.hero.subtitle') }}
            </p>
        </div>

        {{ hero_buttons(
        home_href='/',
        section_label=t('siteb.speakers.section_label'),
        section_href='/speakers',
        is_detail=True,
        current_path=request.url.path,
        detail_label=t('speaker.detail.breadcrumb'),
        detail_href='#speaker-body',
        detail_refresh=False
        ) }}
    </section>

    <!-- BODY -->
    <section id="speaker-body" class="bg-[#0A1536] py-12 sm:py-14 lg:py-16">
        <div class="max-w-[1220px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid gap-8 lg:gap-12 items-start lg:grid-cols-[minmax(0,320px)_minmax(0,1fr)]">
                <!-- Portrait -->
                <aside class="flex justify-center lg:justify-start">
                    <div
                        class="relative w-[min(100%,300px)] sm:w-[300px] lg:w-[320px] overflow-hidden rounded-[18px] shadow-[0_16px_32px_rgba(9,18,46,0.35)] ring-1 ring-white/20 bg-white">
                        <div class="relative aspect-[3/4]">
                            {% if speaker.photo_url %}
                            <img src="{{ speaker.photo_url }}" alt="{{ speaker.fullname }}"
                                class="absolute inset-0 w-full h-full object-cover" loading="lazy" />
                            {% else %}
                            <img src="/static/img/person_placeholder.png" alt="Speaker portrait"
                                class="absolute inset-0 w-full h-full object-cover opacity-85" loading="lazy" />
                            {% endif %}
                        </div>
                    </div>
                </aside>

                <!-- Details -->
                <article
                    class="bg-white rounded-[18px] shadow-[0_20px_40px_rgba(9,18,46,0.18)] px-6 py-8 sm:px-8 sm:py-9 lg:px-10 lg:py-10">
                    <div class="font-['Roboto'] uppercase tracking-[0.26em] text-[12px] text-[#20306C]">
                        {{ t('speaker.card.label') }}
                    </div>

                    <h2
                        class="mt-3 font-['Roboto'] font-semibold text-[#0E1B40] text-[clamp(28px,4vw,42px)] leading-snug">
                        {{ speaker.fullname }}
                    </h2>

                    {% if speaker.company_photo_url or speaker.position or speaker.company %}
                    <div class="mt-5 flex flex-wrap items-center gap-4">
                        {% if speaker.company_photo_url %}
                        <img src="{{ speaker.company_photo_url }}" alt="Company logo"
                            class="h-[38px] sm:h-[44px] w-auto object-contain shrink-0" loading="lazy" />
                        {% endif %}
                        {% if speaker.position or speaker.company %}
                        <p
                            class="font-['Lato'] text-[#1E1E1E] text-[17px] sm:text-[19px] leading-relaxed max-w-[480px]">
                            {{ speaker.position }}{% if speaker.company %}{% if speaker.position %}, {% endif %}{{ speaker.company }}{% endif %}
                        </p>
                        {% endif %}
                    </div>
                    {% endif %}

                    <div class="mt-7 h-px bg-gradient-to-r from-[#d2dbff] via-[#bac9ff] to-transparent"></div>

                    <section class="mt-7 space-y-4 font-['Roboto'] text-[16px] sm:text-[17px] leading-[1.7] text-[#1A2550]">
                        {% set _desc = speaker.description or '' %}
                        {% if _desc %}
                        <p class="whitespace-pre-line">{{ _desc }}</p>
                        {% else %}
                        <p class="text-[#3b4371]/85">
                            {{ t('speaker.bio.missing') }}
                        </p>
                        {% endif %}
                    </section>

                    {% if speaker.body_html %}
                    <section class="mt-7 prose max-w-none prose-p:my-4 prose-headings:mt-6 prose-headings:mb-3
                                    prose-headings:font-['Montserrat'] prose-p:font-['Roboto'] prose-li:font-['Roboto']
                                    prose-a:text-[#20306C] hover:prose-a:underline">
                        {{ speaker.body_html | safe }}
                    </section>
                    {% endif %}
                </article>
            </div>
        </div>
    </section>
</main>
{% else %}
<main>
    <!-- HERO -->
    <section class="relative w-full h-[420px]">
        <img src="/static/img/speaker_hero.png" alt="" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0 bg-black/40"></div>

        <div class="relative z-[1] h-full flex flex-col items-center justify-center text-center px-4">
            <h1 class="font-['Montserrat'] font-bold text-[clamp(34px,5vw,56px)] leading-tight text-white">
                {{ t('speakers.hero.title') }}
            </h1>
            <p class="mt-3 font-['Roboto'] text-[clamp(16px,2.4vw,22px)] text-white/90">
                {{ t('speakers.hero.subtitle') }}
            </p>
        </div>

        {{ hero_buttons(
        home_href='/',
        section_label=t('speakers.section_label'),
        section_href='/speakers',
        is_detail=True,
        current_path=request.url.path,
        detail_label=t('speaker.detail.breadcrumb'),
        detail_href='#speaker-body',
        detail_refresh=False
        ) }}
    </section>

    <!-- BODY -->
    <section id="speaker-body" class="max-w-[1440px] mx-auto px-4 py-10">
        <div class="grid gap-8 md:gap-[40px] justify-center md:[grid-template-columns:380px_800px]">
            <!-- Left image -->
            <aside class="mx-auto md:mx-0">
                <div class="relative w-[min(100%,380px)] h-[450px] rounded-[20px] overflow-hidden bg-white">
                    {% if speaker.photo_url %}
                    <img src="{{ speaker.photo_url }}" alt="{{ speaker.fullname }}"
                        class="absolute inset-0 w-full h-full object-cover" />
                    {% else %}
                    <img src="/static/img/person_placeholder.png" alt="Speaker"
                        class="absolute inset-0 w-full h-full object-cover opacity-80" />
                    {% endif %}
                </div>
            </aside>

            <!-- Right panel -->
            <article class="bg-white rounded-[20px] shadow w-full md:w-[800px] min-h-[704px] p-6 md:p-8">
                <div class="text-[rgba(21,25,56,0.85)] font-['Roboto'] text-[20px] leading-[23px]">
                    {{ t('speaker.card.label') }}
                </div>

                <h2
                    class="mt-3 font-['Roboto'] font-semibold text-[#151938] text-[clamp(28px,4vw,45px)] leading-[1.18]">
                    {{ speaker.fullname }}
                </h2>

                {% if speaker.company_photo_url or speaker.position or speaker.company %}
                <div class="mt-4 flex items-center gap-3 md:gap-4">
                    {% if speaker.company_photo_url %}
                    <img src="{{ speaker.company_photo_url }}" alt="Company logo"
                        class="h-[40px] md:h-[50px] w-auto object-contain shrink-0" loading="lazy" />
                    {% endif %}
                    {% if speaker.company_photo_url and (speaker.position or speaker.company) %}
                    <span class="hidden md:inline-block w-[2px] h-[34px] bg-[#007A3D]"></span>
                    {% endif %}
                    {% if speaker.position or speaker.company %}
                    <p
                        class="font-['Roboto'] text-[#151938] text-[22px] md:text-[25px] leading-[28px] md:leading-[30px] max-w-[420px] md:max-w-[520px]">
                        {{ speaker.position }}{% if speaker.company %}{% if speaker.position %}, {% endif %}{{
                        speaker.company }}{% endif %}
                    </p>
                    {% endif %}
                </div>
                {% endif %}

                <section class="mt-6">
                    {% set _desc = speaker.description or '' %}
                    {% if _desc %}
                    <div class="font-['Roboto'] text-[25px] leading-[40px] text-black max-w-[700px]">{{ _desc }}</div>
                    {% else %}
                    <p class="font-['Roboto'] text-[18px] leading-8 text-slate-800">
                        {{ t('speaker.bio.missing') }}
                    </p>
                    {% endif %}
                </section>
            </article>
        </div>
    </section>
</main>
{% endif %}
{% endblock %}
