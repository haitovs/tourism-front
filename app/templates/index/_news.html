{# app/templates/_news.html #}
{% set _news = news or [] %}
{% if _news|length > 0 %}
{% set featured = _news[0] %}
{% set others = _news[1:5] %}

<section id="news" class="max-w-[var(--container)] mx-auto px-4 py-16">
    <div class="mb-6">
        <header class="text-center">
            <div class="flex items-center justify-center gap-4">
                <span class="hidden sm:block h-px w-[60px] bg-[var(--c-primary)]"></span>
                <span class="font-['Montserrat'] text-[clamp(18px,2.6vw,30px)] leading-[1.4] text-[var(--c-primary)]">
                    {{ t('index.news.band') }}
                </span>
                <span class="hidden sm:block h-px w-[60px] bg-[var(--c-primary)]"></span>
            </div>
            <h2 class="font-['Montserrat'] font-medium text-[clamp(24px,4vw,50px)] leading-[1.2] text-[#1E1E1E] mt-2">
                {{ t('index.news.title') }}
            </h2>
        </header>
    </div>

    <div class="h-[3px] bg-[rgba(0,122,61,0.35)] w-full mb-6"></div>

    <div class="flex flex-col lg:flex-row gap-6 lg:gap-8">
        <!-- Featured -->
        <article class="w-full lg:max-w-[600px] mx-auto lg:mx-0 rounded-[18px] overflow-hidden bg-white shadow-sm">
            <div class="w-full aspect-[16/7] bg-slate-100">
                {% if featured.image_url %}
                <img src="{{ featured.image_url }}" alt="{{ featured.title }}" loading="lazy"
                    class="w-full h-full object-cover">
                {% else %}
                <img src="/static/img/news_placeholder.jpg" alt="" loading="lazy"
                    class="w-full h-full object-cover opacity-80">
                {% endif %}
            </div>
            <div class="p-4 sm:p-5">
                <div class="flex items-center gap-3 sm:gap-4">
                    {% if featured.category %}
                    <span
                        class="inline-flex items-center justify-center h-[clamp(28px,3.2vw,36px)] px-3 sm:px-4 rounded-[10px] bg-[#007A3D]">
                        <span class="font-['Roboto'] font-bold text-[clamp(12px,1.6vw,16px)] leading-[1] text-white">
                            {{ featured.category }}
                        </span>
                    </span>
                    {% endif %}
                    {% if featured.date_human %}
                    <span class="flex items-center gap-2">
                        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <circle cx="12" cy="12" r="9" fill="none" stroke="#007A3D" stroke-width="2" />
                            <path d="M12 7v5l3 2" fill="none" stroke="#007A3D" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                        <span
                            class="font-['Montserrat'] font-semibold text-[clamp(12px,1.6vw,16px)] text-[rgba(0,122,61,0.45)]">
                            {{ featured.date_human }}
                        </span>
                    </span>
                    {% endif %}
                </div>

                <h3
                    class="mt-3 sm:mt-4 font-['Montserrat'] font-semibold text-[clamp(20px,4.2vw,35px)] leading-[1.2] text-[#1E1E1E]">
                    {{ featured.title }}
                </h3>

                {% if featured.summary %}
                <p class="mt-3 sm:mt-4 font-['Roboto'] text-[clamp(14px,2vw,18px)] leading-[1.5] text-black/70">
                    {{ featured.summary }}
                </p>
                {% endif %}

                <a href="/news/{{ featured.id }}"
                    class="mt-4 sm:mt-5 inline-flex items-center gap-2 font-['Roboto'] text-[clamp(14px,2vw,18px)] underline text-[#007A3D]">
                    {{ t('btn.read_more') }}
                    <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M5 12h14M13 6l6 6-6 6" fill="none" stroke="#007A3D" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </a>
            </div>
        </article>

        <!-- Grid -->
        <div class="grid grid-cols-2 gap-4 sm:gap-5 lg:gap-6 flex-1">
            {% for n in others %}
            <article class="col-span-1 rounded-[16px] overflow-hidden bg-white shadow-sm">
                <div class="w-full aspect-[16/11] bg-slate-100">
                    {% if n.image_url %}
                    <img src="{{ n.image_url }}" alt="{{ n.title }}" loading="lazy" class="w-full h-full object-cover">
                    {% else %}
                    <img src="/static/img/news_placeholder.jpg" alt="" loading="lazy"
                        class="w-full h-full object-cover opacity-80">
                    {% endif %}
                </div>
                <div class="p-3.5 sm:p-4">
                    <div class="flex items-center gap-2.5 sm:gap-3">
                        {% if n.category %}
                        <span
                            class="inline-flex items-center justify-center h-[clamp(24px,3vw,32px)] px-2.5 sm:px-3.5 rounded-[8px] bg-[#007A3D]">
                            <span class="font-['Roboto'] font-bold text-[clamp(11px,1.5vw,14px)] text-white">
                                {{ n.category }}
                            </span>
                        </span>
                        {% endif %}
                        {% if n.date_human %}
                        <span class="flex items-center gap-1.5">
                            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                                <circle cx="12" cy="12" r="9" fill="none" stroke="#007A3D" stroke-width="2" />
                                <path d="M12 7v5l3 2" fill="none" stroke="#007A3D" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span
                                class="font-['Montserrat'] font-semibold text-[clamp(11px,1.5vw,14px)] text-[#8CC3A8]">
                                {{ n.date_human }}
                            </span>
                        </span>
                        {% endif %}
                    </div>

                    <h4
                        class="mt-2.5 font-['Montserrat'] font-semibold text-[clamp(14px,2.2vw,18px)] leading-[1.25] text-[#1E1E1E] line-clamp-3">
                        {{ n.title }}
                    </h4>

                    <a href="/news/{{ n.id }}"
                        class="mt-3 inline-flex items-center gap-2 font-['Roboto'] text-[clamp(13px,1.9vw,16px)] underline text-[#007A3D]">
                        {{ t('btn.read_more') }}
                        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M5 12h14M13 6l6 6-6 6" fill="none" stroke="#007A3D" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>

    <div class="mt-8 flex justify-center">
        <a href="/news"
            class="inline-flex items-center justify-center w-[190px] h-[50px] rounded-[12px] bg-[#EC233C] text-white gap-2.5">
            <span class="font-['Roboto'] text-[18px] leading-[1] underline">
                {{ t('index.news.more_details') }}
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px]" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="1.6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
        </a>
    </div>

</section>
{% else %}
<section id="news" class="max-w-[var(--container)] mx-auto px-4 py-16">
    <div class="text-center text-slate-500">{{ t('index.news.none') }}</div>
</section>
{% endif %}