{# app/templates/index/_organizers.html #}
{% set all = data["items"]|default([]) %}
{% set count = all|length %}

{# Organizer card partial: keep sizes/placement, add partner-like border/hover/focus #}
{% macro organizer_card(p) -%}
<article class="box-border border-2 border-transparent hover:border-[var(--c-primary)]
         transition-colors focus-visible:outline-none focus-visible:ring-2
         focus-visible:ring-[var(--c-primary)] focus-visible:ring-offset-2
         bg-[#F4F4F2] rounded-[5px] shadow-[0_4px_4px_rgba(0,0,0,0.25)]
         w-[clamp(160px,28vw,280px)] h-[clamp(100px,18vw,180px)]
         flex items-center justify-center hover:shadow-md">
    {% if p.logo_url %}
    <img src="{{ p.logo_url }}" alt="{{ p.name }}" title="{{ p.name }}" class="object-contain select-none pointer-events-none
                max-w-[clamp(120px,19vw,213.14px)] max-h-[clamp(90px,13vw,154.51px)]" loading="lazy" />
    {% else %}
    <img src="/static/img/img_placeholder.png" alt="{{ p.name }}" title="{{ p.name }}" class="object-contain opacity-70 select-none pointer-events-none
                max-w-[clamp(120px,19vw,213.14px)] max-h-[clamp(90px,13vw,154.51px)]" loading="lazy" />
    {% endif %}
</article>
{%- endmacro %}

{% if count == 0 %}
<div class="text-center text-slate-500">{{ t('index.organizers.none') }}</div>

{% elif count < 8 %} <div class="w-full flex justify-center">
    <ul class="grid grid-cols-2 md:grid-cols-4 gap-x-[clamp(12px,2.5vw,30px)] gap-y-[clamp(12px,2.5vw,30px)]">
        {% for p in all %}
        <li class="flex justify-center">
            {% set href = p.website|default('') %}
            {% if href %}
            <a href="{{ href }}" target="_blank" rel="noopener noreferrer" class="block focus-visible:outline-none"
                aria-label="{{ p.name }} {{ t('sponsors.common.opens_new_tab') }}">
                {{ organizer_card(p) }}
            </a>
            {% else %}
            {{ organizer_card(p) }}
            {% endif %}
        </li>
        {% endfor %}
    </ul>
    </div>

    {% else %}
    <div class="marquee" data-marquee data-speed="60" data-min="1" data-respect-rm="false" style="--gap: 1rem">
        <div class="marquee__viewport">
            <ul class="marquee__track">
                {% for p in all %}
                <li class="marquee__item">
                    {% set href = p.website|default('') %}
                    {% if href %}
                    <a href="{{ href }}" target="_blank" rel="noopener noreferrer"
                        class="block focus-visible:outline-none"
                        aria-label="{{ p.name }} {{ t('sponsors.common.opens_new_tab') }}">
                        {{ organizer_card(p) }}
                    </a>
                    {% else %}
                    {{ organizer_card(p) }}
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}