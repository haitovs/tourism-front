{% extends "base.html" %}
{% from "_hero_macros.html" import hero_buttons %}
{% from "speaker/_macros.html" import pager %}
{% block content %}
<main>
    <!-- HERO -->
    <section class="relative w-full h-[420px]">
        <img src="/static/img/speaker_hero.png" alt="" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0 bg-black/40"></div>

        <div class="relative z-[1] h-full flex flex-col items-center justify-center text-center px-4">
            <h1 class="font-['Montserrat'] font-bold text-[clamp(34px,5vw,56px)] leading-tight text-white">
                {{ t('speakers.hero.title') }}
            </h1>
            <p class="mt-3 font-['Roboto'] text-[clamp(16px,2.4vw,22px)] text-white/90">
                {{ t('speakers.hero.subtitle') }}
            </p>
        </div>

        {{ hero_buttons(
        home_href = '/',
        section_label = t('speakers.section_label'),
        section_href = '/speakers',
        is_detail = False
        ) }}
    </section>

    <!-- BODY -->
    <section class="max-w-[1310px] mx-auto px-4 md:px-0 py-8"
        x-data="{ q: '{{ (q or '')|e }}', norm(s){ return (s||'').toString().toLowerCase().normalize('NFKD').replace(/[\u0300-\u036f]/g,''); } }">
        <!-- Search -->
        <div class="w-full h-[68px] rounded-[10px] bg-white border border-[rgba(0,122,61,0.7)] flex overflow-hidden">
            <input x-model.trim="q" type="search" placeholder="{{ t('speakers.search.placeholder') }}"
                class="flex-1 h-full px-5 md:px-6 outline-none font-['Roboto'] font-semibold text-[20px] md:text-[24px] text-[#1E1E1E] placeholder-[#A6D0BB]"
                autocomplete="off" />
            <button type="button" class="w-[64px] h-[68px] bg-[#007A3D] grid place-items-center"
                aria-label="{{ t('speakers.search.aria') }}">
                <svg viewBox="0 0 24 24" class="w-[26px] h-[26px]" fill="none">
                    <circle cx="11" cy="11" r="7" stroke="#FFFFFF" stroke-width="3" />
                    <path d="M20 20L16.65 16.65" stroke="#FFFFFF" stroke-width="3" stroke-linecap="round" />
                </svg>
            </button>
        </div>

        <!-- Grid -->
        <div class="mt-6 bg-white rounded-[12px] p-5 md:p-8">
            <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 place-items-stretch">
                {% set items = speakers or [] %}
                {% for sp in items %}
                <li x-show="!q || norm('{{ (sp.fullname or sp.name or '')|e }} {{ (sp.position or '')|e }} {{ (sp.company or '')|e }}').includes(norm(q))"
                    x-cloak class="w-full flex justify-center">
                    <!-- MOBILE card -->
                    <a href="/speakers/{{ sp.id }}" class="block md:hidden w-[350px] h-[80px]">
                        <div
                            class="relative w-full h-full shadow-[0_4px_4px_rgba(0,0,0,0.25)] rounded-[10px] overflow-hidden grid grid-cols-[20%_80%]">
                            <div class="h-full">
                                <div class="w-full h-full bg-[#F3F3F6]">
                                    <img src="{{ sp.photo_url or '/static/img/person_placeholder.jpg' }}"
                                        alt="{{ sp.fullname }}" class="w-full h-full object-cover" loading="lazy" />
                                </div>
                            </div>
                            <div class="h-full bg-white rounded-r-[10px] px-3 py-2 flex flex-col justify-center">
                                <div class="font-['Montserrat'] font-semibold text-[16px] leading-[19px] text-black truncate"
                                    title="{{ sp.fullname }}">
                                    {{ sp.fullname }}
                                </div>
                                <div
                                    class="mt-1 font-['Montserrat'] font-semibold text-[12px] leading-[14px] text-black line-clamp-2">
                                    {{ sp.position }}{% if sp.company %}, {{ sp.company }}{% endif %}
                                </div>
                            </div>
                        </div>
                    </a>

                    <!-- DESKTOP/TABLET card -->
                    <a href="/speakers/{{ sp.id }}" class="hidden md:block group w-full">
                        <div
                            class="relative w-full aspect-[4/5] rounded-[20px] lg:rounded-[28px] overflow-hidden shadow transition-transform duration-300 group-hover:scale-[1.01]">
                            {% if sp.photo_url %}
                            <img src="{{ sp.photo_url }}" alt="{{ sp.fullname }}"
                                class="absolute inset-0 w-full h-full object-cover" loading="lazy" />
                            {% else %}
                            <img src="/static/img/person_placeholder.jpg" alt="Speaker"
                                class="absolute inset-0 w-full h-full object-cover opacity-80" loading="lazy" />
                            {% endif %}

                            <div
                                class="absolute inset-x-0 bottom-0 pt-10 pb-4 px-4 lg:px-5 bg-gradient-to-t from-black/75 via-black/35 to-transparent">
                                <div class="text-white">
                                    <div class="font-['Roboto'] font-bold text-[clamp(18px,1.6vw,24px)] leading-tight truncate"
                                        title="{{ sp.fullname }}">
                                        {{ sp.fullname }}
                                    </div>
                                    <div
                                        class="mt-1.5 font-['Roboto'] text-[clamp(14px,1.2vw,18px)] leading-snug opacity-95 line-clamp-2">
                                        {{ sp.position }}{% if sp.company %} , {{ sp.company }}{% endif %}
                                    </div>
                                </div>
                                <div class="absolute right-4 lg:right-5 bottom-4">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        class="w-[22px] h-[22px] lg:w-[24px] lg:h-[24px] transition-transform group-hover:translate-x-[2px]"
                                        viewBox="0 0 24 24" fill="none">
                                        <path d="M9 6l6 6-6 6" stroke="#FFFFFF" stroke-width="1.8"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </a>
                </li>
                {% endfor %}

                {% if items|length == 0 %}
                <li class="col-span-full text-center text-slate-500 py-10">{{ t('speakers.none') }}</li>
                {% endif %}
            </ul>
        </div>

        {{ pager(current_page or 1, total_pages or 1, q, base='/speakers') }}
    </section>
</main>
{% endblock %}